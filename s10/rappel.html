<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
  </head>
  <body>
    Email : <input type="text" name="email" id="email" /><small></small> Mot de
    passe : <input type="password" id="passe" /><small></small>
    Cin :
    <input type="text" id="cin" /><small></small>
    <select name="" id="pays">
      <option value="+212">Maroc</option>
      <option value="+33">France</option>
    </select>
    <input type="text" id="ind" size="3" readonly />
    <input type="tel" />
    Homme <input type="radio" name="hf" id="homme" value="homme" /> Femme
    <input type="radio" name="hf" id="femme" value="femme" />
    <button class="btn btn-primary" type="button">Valider</button>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script>
      $(document).ready(function() {
        $(document).on("blur   keyup", "input, textarea", function() {
          if ($(this).val() == "") {
            $(this)
              .next("small")
              .addClass("text-danger")
              .html("ce champs est requis");
          } else {
            $(this)
              .next("small")
              .html("");
          }
        });
        $(document).on("click", "button", function() {
          // $("input").each(function(index, element) {
          // $(element).blur();
          //});
          $("input").blur();
        });

        $(document).on("blur keyup", "#email", function() {
          let modele = /^[a-zA-Z]{2,}\w{0,}@cesa.ma$/;
          if (!modele.test($(this).val())) {
            $(this)
              .next("small")
              .addClass("text-danger")
              .html("Email invalide");
          }
        });

        $(document).on("blur keyup", "#cin", function() {
          let modele = /^[a-zA-Z]{1,2}[ -/]*[0-9]{4,6}$/;
          if (!modele.test($(this).val())) {
            $(this)
              .next("small")
              .addClass("text-danger")
              .html("CIn invalide");
          }
        });
        $(document).on("change", "#pays", function() {
          $(this)
            .next("input")
            .val($(this).val());
        });
        $(document).on(
          "change",
          "#homme, #femme, input[name='hf']",
          function() {
            if ($(this).val() == "homme") {
              $("body")
                .addClass("bg-info")
                .removeClass("bg-danger");
            } else {
              $("body")
                .addClass("bg-danger")
                .removeClass("bg-info");
            }
          }
        );
      });
    </script>
  </body>
</html>
